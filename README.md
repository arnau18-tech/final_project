# Programming Final Project: Airbnb & Seasonal Analysis

**Universitat Pompeu Fabra – Programming**  
**Academic year: 2024–2025**

**Authors:**  
- Emilio Play  
- Xavi Cuyas  
- Guillermo Comerma  
- Arnau Villegas  

---

## 1. Project Overview

This project has two main components:

1. **Airbnb market simulation**  
   We implemented a simplified agent-based model where:
   - Each listing is represented as a `Place`.
   - Each property owner is a `Host`.
   - Hosts earn profits from their listings and submit bids to acquire neighbouring properties.
   - Two behavioural rules were compared:
     - **v0 (original)**: hosts always bid with all their available profits.  
     - **v1 (modified)**: hosts can only spend up to *70%* of their profits when bidding, reducing aggressive expansion.

   The simulation is run from `main.py`, and results are exported as plots in the `reports/` folder.

2. **Seasonal availability analysis (Barcelona)**  
   Using the **Airbnb Open Data calendar dataset** for Barcelona (2025), we analysed how availability changes across months.  
   The analysis was performed in a Jupyter notebook:  
   `notebooks/seasonality_analysis.ipynb`

   The dataset used was:
   - `data/calendar.csv` (detailed daily booking/availability data)

   The final output is a monthly availability curve saved as:  
   - `reports/graph3.png`



## 2. Repository Structure
```
final_project/
│
├── data/
│   └── calendar.csv
│
├── notebooks/
│   └── seasonality_analysis.ipynb
│
├── reports/
│   ├── graph1.png
│   ├── graph2_v0.png
│   ├── graph2_v1.png
│   └── graph3.png   ← Final analysis figure
│
├── src/
│   └── final_project/
│       ├── city.py
│       ├── hosts.py
│       ├── place.py
│       └── __init__.py
│
├── main.py
├── pyproject.toml
└── README.md
```

## 3. Simulation Summary

The simulation compares two rules for host behaviour:

### **Rule v0 — Original**
- Hosts bid on any neighbouring property they can fully afford.
- They always use **100% of their profits** to bid.

### **Rule v1 — Modified**
- Hosts may only allocate **up to 70% of their profits** for bidding.
- This reduces risk and slows down the “land-grab” behaviour.

### Output
The program prints progress to the console and generates:
- `graph1.png` – initial price distribution  
- `graph2_v0.png` – simulation result using rule v0  
- `graph2_v1.png` – simulation result using rule v1  

All plots are stored in `/reports`.

To run the simulation:

\`\`\`bash  
uv run main.py  
\`\`\`

## 4. Seasonal Analysis Summary

Using the **calendar dataset** for Barcelona (2025), we analysed how the availability of Airbnb listings evolves across months.  
The goal is to identify seasonal patterns in demand based solely on availability, since price fields in the dataset were empty.

The analysis was performed in the notebook:
`notebooks/seasonality_analysis.ipynb`


## 5. Data Cleaning

Before computing any seasonal indicators, the dataset was cleaned and prepared:

1. Converted the `date` column to a proper datetime format.
2. Ensured that the `available` field was stored as a string.
3. Extracted the month number (1–12) from each date.
4. Created a new binary column:
   - `1` = listing available  
   - `0` = listing booked  
5. Inspected the dataset for missing or inconsistent values.

These steps ensured that monthly availability was calculated accurately.


## 6. Methodology

The monthly analysis followed a simple and transparent procedure:

- Grouped the cleaned dataset by the `month` column.
- Computed the **average availability rate** for each month:
  \[ \text{Availability\%} = \text{mean(is\_available)} \times 100 \]
- Generated a single line chart to visualise the seasonal behaviour.
- Saved the resulting figure in the `reports/` folder.

This method makes it easy to compare how availability changes throughout the year.


## 7. Seasonal Analysis Results

The final dataset shows a clear seasonal pattern:

- Availability is **lower during the summer months**, indicating higher tourist demand.
- The **lowest point** typically occurs around **July**.
- Availability **increases again from September onward**, reaching higher levels across autumn and winter.

These results are consistent with tourism dynamics in Mediterranean cities.


## 8. Output Figure

The final visualisation generated by the notebook is saved as: 
`final_project/reports/graph3.png`
This image represents the monthly availability percentage for Barcelona and serves as the main visual result of Part 2 of the project.
Running the notebook `notebooks/part2.ipynb` reads `data/calendar.csv` and generates
the figure `reports/graph3.png`.


## 9. Datasets

The project uses the following dataset from Inside Airbnb:

- **Barcelona – Calendar data (2025)**  
  Download page: https://insideairbnb.com/barcelona/  
  File used in this project: `calendar.csv` (stored in the `data/` folder)